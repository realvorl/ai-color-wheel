<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Color Ring</title>
  <style>
    body {
      margin: 0;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    #wheel {
      position: relative;
      width: 300px;
      height: 300px;
    }
    svg {
      width: 100%;
      height: 100%;
      transform: rotate(-90deg);
    }
    .sector {
      cursor: pointer;
      transition: fill 0.3s;
    }
    #colorPicker {
      position: absolute;
      display: none;
      border: none;
      padding: 0;
    }
  </style>
</head>
<body>
  <div id="wheel">
    <svg viewBox="0 0 100 100" id="colorRing"></svg>
    <input type="color" id="colorPicker">
  </div>

  <script>
    const svg = document.getElementById('colorRing');
    const numSectors = 12;
    const outerR = 50;
    const innerR = 30;
    const center = { x: 50, y: 50 };
    const colors = ["#FF0000","#FF7F00","#FFFF00","#00FF00","#00FFFF","#0000FF",
                    "#8B00FF","#FF00FF","#FFC0CB","#A52A2A","#808080","#FFD700"];

    function polarToCartesian(cx, cy, radius, angle) {
      const rad = angle * Math.PI / 180;
      return { x: cx + radius * Math.cos(rad), y: cy + radius * Math.sin(rad) };
    }

    function describeSector(cx, cy, outerR, innerR, startAngle, endAngle) {
      const startOuter = polarToCartesian(cx, cy, outerR, startAngle);
      const endOuter = polarToCartesian(cx, cy, outerR, endAngle);
      const startInner = polarToCartesian(cx, cy, innerR, startAngle);
      const endInner = polarToCartesian(cx, cy, innerR, endAngle);
      // For 30Â° sectors, largeArcFlag is always 0.
      return [
        "M", startOuter.x.toFixed(2), startOuter.y.toFixed(2),
        "A", outerR, outerR, 0, 0, 1, endOuter.x.toFixed(2), endOuter.y.toFixed(2),
        "L", endInner.x.toFixed(2), endInner.y.toFixed(2),
        "A", innerR, innerR, 0, 0, 0, startInner.x.toFixed(2), startInner.y.toFixed(2),
        "Z"
      ].join(" ");
    }

    for (let i = 0; i < numSectors; i++) {
      const startAngle = i * (360 / numSectors);
      const endAngle = (i + 1) * (360 / numSectors);
      const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
      path.setAttribute("d", describeSector(center.x, center.y, outerR, innerR, startAngle, endAngle));
      path.setAttribute("fill", colors[i]);
      path.setAttribute("class", "sector");
      path.setAttribute("id", "sector" + i);
      svg.appendChild(path);
    }

    document.querySelectorAll('.sector').forEach(sector => {
      sector.addEventListener('click', function(e) {
        const picker = document.getElementById('colorPicker');
        const wheelRect = document.getElementById('wheel').getBoundingClientRect();
        picker.style.left = (e.clientX - wheelRect.left) + 'px';
        picker.style.top = (e.clientY - wheelRect.top) + 'px';
        picker.value = this.getAttribute('fill');
        picker.style.display = 'block';
        picker.onchange = (ev) => {
          this.setAttribute('fill', ev.target.value);
          picker.style.display = 'none';
        };
        e.stopPropagation();
      });
    });

    document.addEventListener('click', function(e) {
      if (e.target.id !== 'colorPicker') {
        document.getElementById('colorPicker').style.display = 'none';
      }
    });
  </script>
</body>
</html>
